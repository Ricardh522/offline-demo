<!DOCTYPE html>

<html>
<!-- <html manifest="app/appcache.manifest"> -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0,user-scalable=no, width=device-width"/>
<!-- meta tags to hide url and minimize status bar to give the web app
a native app look this only happens after app is saved to the desktop-->
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="mobile-web-app-capable" content="yes"/>

<link rel="manifest" href="app/manifest.json"> 
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="app/resources/images/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="app/resources/images/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="app/resources/images/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="app/resources/images/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="app/resources/images/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="app/resources/images/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="app/resources/images/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="app/resources/images/apple-touch-icon-152x152.png" />
<!-- <link rel="apple-touch-startup-image" href="/startup.png"> -->
<link rel="icon" type="image/png" href="app/resources/images/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="app/resources/images/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="app/resources/images/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="app/resources/images/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="app/resources/images/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="Mobile App Bootstrap with Offline-js"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="app/resources/images/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="app/resources/images/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="app/resources/images/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="app/resources/images/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="app/resources/images/mstile-310x310.png" />

<title>Mobile App Bootstrap with Offline-js</title>

<head>
 <script>
//     // DO NOT DELETE!
//     // Listen for application cache update events
//     // We want to place this as early in the application life-cycle as possible!
    window.addEventListener('load', function(evt) {
        
        var appCache = window.applicationCache;

        var status = function() {
          switch (appCache.status) {
            case appCache.UNCACHED: // UNCACHED == 0
              return 'UNCACHED';
              break;
            case appCache.IDLE: // IDLE == 1
              return 'IDLE';
              break;
            case appCache.CHECKING: // CHECKING == 2
              return 'CHECKING';
              break;
            case appCache.DOWNLOADING: // DOWNLOADING == 3
              return 'DOWNLOADING';
              break;
            case appCache.UPDATEREADY:  // UPDATEREADY == 4
              return 'UPDATEREADY';
              break;
            case appCache.OBSOLETE: // OBSOLETE == 5
              return 'OBSOLETE';
              break;
            case appCache.CACHE_LOADED:
              return 'CACHE LOADED';
            default:
              return 'UKNOWN CACHE STATUS';
              break;
          };
        };

        appCache.addEventListener('updateready', function(evt) {
            if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
                // Browser downloaded a new app cache.
                if (confirm('A new version of this cache is available.')) {
                    window.location.reload();
                    console.log("App cache reloaded");
                    appCache.swapCache();
                }
            } else {
                // Manifest didn't changed. Nothing new to server.
                console.log("App cache no change");
            }
        }, false);

    }, false);

  </script>
  

    <!-- Bootstrap core CSS -->
    <link href="app/resources/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href= "dijit/themes/claro/claro.css">
    <link rel="stylesheet" href= "esri/css/esri.css">
    <link rel="stylesheet" href= "esri/css/calcite/calcite.css">

    <link rel="stylesheet" href="app/resources/css/bootstrapmap.min.css">
    <link rel="stylesheet" href="app/resources/css/all.css">
 
    <!--Include a reference to offline.js which detects online/offline conditions-->
    <script src="app/libs/offline.min.js"></script>
    <script src="app/libs/jquery-1.11.1.js"></script>
    <script src="app/libs/bootstrap.min.js"></script>     


    <script>
        Offline.options = {
            checks: {
                image: {
                    url: function () {
                        return 'http://esri.github.io/offline-editor-js/tiny-image.png?_' + (Math.floor(Math.random() * 1000000000));
                    }
                },
                active: 'image'
            }
        }


    </script>


    

  <script data-dojo-config="async: true, deps: ['app/run']" src="./dojo/dojo.js"></script>
  
    <!-- Include a reference to IndexedDBShim for library to work on Safari 7.x -->
    <script src="./app/libs/IndexedDBShim.js"></script>
</head>
<body class="claro">
    <div data-dojo-type="app/App" id="appDiv"></div>
</body>
</html>
